(function(e){"use strict";function n(e,n){for(var t=0;t<e.length;t++)if(e[t]._id==n)return e[t].data}const t=({methodName:n,data:t})=>new Promise((a,i)=>{e.PostComponents(n,t,e=>{a(e)})});class a{constructor(){this.project=null,this.inv=null,this.money=null,this.date=null,this.urlForDocument=null,this.allInvsOfProject=[],this.DT=null,this.redactingInvDoc=null,this.typeRender=null}defaultCSS(){$(".index_page_menu").css({flex:"none",position:"absolute","margin-left":"-100%"}),$(".index_page_body_header_info").css({"justify-content":"center"}),$(".index_page_body_data").css({padding:0}),$(".index_page_body_header_user_logotype").css({display:"none"}),$(".buttons_menu").css({display:"none"}),$(".index_page_body_header_alertNewBlock").css({display:"none"}),$(".index_page_body_header_user").css("display","none"),void 0!==this.project.design_type&&"pp"==this.project.design_type&&($("body").addClass("pp_project"),$("body").append('\n                        <div class="logo_business">\n                            <div class="page-header__logo">\n                                <div class="trapezoid left"></div>\n                                <div class="trapezoid right"></div>\n                                <a href="/">\n                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 1000 1000"><g><path d="M495.1 212c.8-2 3.2-1.7 4.9-1.3 1.7 2 2.4 4.5 3.5 6.9 3.5 7.6 6.8 15.4 10.3 23 7.2-4.1 14.3-8.2 21.5-12.3 1.7-1.2 3.8.1 4.7 1.7.4 2-.2 4.1-.4 6.1-2.1 12.6-4.1 25.3-6.4 37.9-.2 2.1-2.2 3.6-4.2 3.3h-62.1c-2.1.3-4.1-1.2-4.2-3.3-2.3-13.3-4.4-26.6-6.6-39.9-.3-1.9-.8-4.4 1.3-5.5 1.2-1.1 2.8-.6 4 .2 6.9 4 13.9 7.9 20.8 11.9 4.5-9.6 8.4-19.3 12.9-28.7m-8.1 35.1c-.7 1.8-3.1 2.6-4.8 1.6-6.2-3.3-12.1-7.1-18.2-10.3 1.7 10.6 3.5 21.3 5.2 31.9h57.5c1.7-10.6 3.6-21.2 5.2-31.9-6.2 3.3-12.1 7-18.3 10.4-1.6 1-4.1.2-4.7-1.7-3.7-8.1-7.3-16.3-10.9-24.4-3.8 8-7.2 16.3-11 24.4zM38.5 255.1h374.8c0 1.8 0 3.7.1 5.5-125 .3-249.9 0-374.8.1-.1-1.8-.1-3.7-.1-5.6zM582.7 255.1h377.8v5.6c-125.9 0-251.8-.1-377.8 0v-5.6zM655.5 332H828c22.5.1 45.3 2.1 66.9 8.8 14.4 4.6 28.7 11 40.2 21 11.5 10.1 19.1 24.2 22 39.1 3.1 16.1 2.8 33.2-3.7 48.4-7 16.7-20.4 29.9-35.3 39.7-26.5 17-58.1 24.1-89.1 25.6-18.5.6-37 .2-55.5.3v118.4c17 7 34.2 13.6 51.1 20.7-.1 2.6-.1 5.2 0 7.8-56.3.1-112.7 0-169 0v-8c14.1-6.7 28.1-13.7 42.3-20.3.4-53.9.1-107.8.2-161.7-.1-37.2.1-74.4-.1-111.6-14.2-6.6-28.2-13.6-42.4-20.3-.1-2.6-.1-5.2-.1-7.9m118 27.5v131c18.5-.2 37.3 1.2 55.4-3.5 16.3-3.8 31.7-12.7 41.9-26.1 7.7-9.9 11.7-22.4 11.7-34.9.2-14.3-2.8-29.3-11.8-40.7-7.8-10-19.5-16-31.3-19.9-21.3-6.8-43.8-5.9-65.9-5.9zM40 333h170c19.4-.1 38.9 1.3 57.9 5.7 16.2 3.8 32.2 9.9 45.9 19.5 13.2 9.2 22.8 23.3 26.7 38.9 3.9 15.9 4.5 33-.7 48.7-4.3 13-12.6 24.3-22.7 33.4-12.9 11.8-28.7 20.1-45.2 25.9-21.7 7.7-44.9 10.7-67.8 11-15.3.1-30.6 0-46 0 .1 39.5-.1 79.1.1 118.6 17 6.7 33.9 13.6 50.9 20.4v8h-169v-8c14.2-6.9 28.3-13.7 42.5-20.5v-273c-14.3-7-28.4-13.8-42.6-20.6v-8m118 27.5v131c14.5-.2 29 .7 43.4-1.2 16.8-2.2 33.5-8.2 46.1-19.9 11-9.8 18.3-23.6 19.3-38.3 1-16-1.6-33.3-11.9-46.1-9.6-11.9-24.4-18.1-38.9-21.6-18.9-4.7-38.6-3.8-58-3.9zM424 480.9c15.1-11.3 34.5-15.2 53-14.2 15.5.6 31.8 4.3 43.8 14.6 7.3 6.1 12 15.2 11.9 24.8.4 9.6-4.9 18.6-11.8 24.9-11 9.9-25 15.4-38.6 20.6 19.5 18.4 38.7 37.1 58.2 55.6 10.8-16.1 18.8-33.9 25.5-52.1-10.3-3.8-20.5-7.7-30.7-11.5 0-1.6 0-3.3-.1-4.9 25.9-.1 51.8 0 77.7 0v4.9c-9 3.8-18.1 7.2-26.9 11.4-11.2 20.8-22.1 41.9-36 61.1 11.7 11 23.1 22.3 34.9 33.3 8 4.2 16.4 7.8 24.6 11.8v5.2h-72.4c-6.2-5.9-12.4-11.9-18.6-17.8-15.6 12-34.8 19.4-54.4 20.6-18.4 1.3-37.8-.6-54-10-9.2-5.2-17-13.4-20.3-23.5-4.1-12.3-3.2-26.4 3.5-37.5 8.6-15.1 23.8-25 39.4-31.9-7.1-7.2-14-14.7-19.7-23.2-6.9-10.1-8.8-23.1-6.7-35 1.8-11.2 8.9-20.7 17.7-27.2m37.9 0c-5.5 1.7-9.3 6.6-11.1 11.8-3.2 9.3-1.8 19.9 3.5 28.1 5.2 8 11.9 15 18.7 21.7 10.9-10.4 18.1-25.3 17-40.6-.5-7.3-3.5-14.9-9.7-19.2-5.4-3.4-12.4-3.6-18.4-1.8m-32 124.1c-.4 10.7 1.5 22.2 8.2 30.8 5.7 7.5 14.6 12.2 23.8 13.6 16.1 2.5 33.1-1 47-9.7-22.6-21.9-45.1-43.8-67.9-65.5-7.9 8.2-11.1 19.7-11.1 30.8zM516.2 730c2.5-1.6 6.5-.2 6.8 3 .5 3.3-3.4 5.8-6.3 4.3-3-1.1-3.3-5.7-.5-7.3zM623 730.4h6.5v50.1H623v-50.1zM542 736.9h6.5v7.7c3.4 0 6.9-.1 10.3.1-.1 1.7-.1 3.5-.1 5.2h-10.3c.1 7-.1 14 .1 21 .5 5.1 7.1 5.4 10.5 3 .9 1.5 1.6 3.1 2 4.9-4.1 2.3-9.4 2.9-13.8.9-3.2-1.5-5.2-5.1-5.2-8.6-.2-7 0-14-.1-21.1h-6.1v-5.4h6.1c.1-2.6.1-5.1.1-7.7zM369.4 752.5c6.4-10.3 24.2-11.3 30.6-.5-1.6 1.1-3.2 2.2-4.9 3.2-3.7-5.4-11.7-6.7-17-3-7 4.8-6.8 16.8.4 21.2 5.3 3.4 13 2 16.7-3.2 1.6 1 3.3 2.1 4.9 3.1-5.6 9.3-19.7 9.9-27.5 3.1-6.8-5.7-8-16.6-3.2-23.9zM413.4 748.9c5.3-3.8 12.1-5.1 18.4-4.3 3.6.5 7.3 2.2 9.3 5.2 2.1 2.9 2.4 6.6 2.4 10.1v20.5h-6.1c0-1.5.1-3 .1-4.5-4 5-11.2 5.8-17.1 4.3-4.2-1.1-8-4.7-8-9.3-.5-4.6 2.9-9.1 7.3-10.2 5.7-1.5 11.6-.7 17.4-1 .1-3.4-.8-7.4-4.3-8.8-5.5-2.3-12.1-.7-16.8 2.7-.8-1.5-1.7-3.1-2.6-4.7m8.8 16.4c-4.1 1.1-4.5 7.3-.9 9.3 4.6 2.5 11.3 1.5 14.5-2.8 1.9-2 1.2-4.8 1.3-7.2-4.9.3-10.1-.6-14.9.7zM462.5 744.6h6.1v5.5c6.3-7.7 19.1-7.6 25.9-.7 7.4 7.5 6.7 21.6-2 28-7 5.2-18.1 4.6-23.7-2.4v18.4h-6.4c.1-16.2.1-32.5.1-48.8m14.9 5.9c-4.2 1.2-7.6 5.1-8.3 9.4-1.5 6.7 2.8 14.5 9.9 15.2 8 1.7 15.4-6.3 13.9-14.2-.3-7.5-8.5-12.7-15.5-10.4zM515.4 780.5c0-12-.1-23.9 0-35.9h6.4v35.9h-6.4zM574 748.9c5.4-3.9 12.4-5.2 18.9-4.2 3.8.6 7.5 2.5 9.4 6 1.9 3.1 1.9 6.8 2 10.3v19.5c-2.1 0-4.1 0-6.2.1 0-1.5-.1-3-.1-4.5-4.9 5.8-14.3 6.3-20.5 2.5-6.1-3.5-5.8-13.6.5-16.8 6.2-3 13.3-1.6 19.9-2-.1-3.3-.8-7.1-4-8.7-5.6-2.6-12.3-.8-17.1 2.5-1-1.5-1.9-3.1-2.8-4.7m8.3 25.9c4.9 2.3 11.9 1.1 14.7-3.8 1.3-1.9.6-4.3.8-6.4-4.9.2-9.9-.6-14.7.6-4.4 1-4.9 7.8-.8 9.6z"></path></g></svg>\n                                </a>\n                            </div>\n                        </div>\n                    '))}async renderFirstData(){var n=this,t=$(`\n                <div class="version2_invester_data_h1">\n                    <h1>Инвестирование в проект «${n.project.data.name}»</h1>\n                </div>\n                <div class="version2_creating_block">\n                    <div class="version2_creating_block_info version2_default_shadow_block">\n                        <div class="version2_default_bkg row_default"></div>\n                        <div class="version2_creating_block_info_row">\n                            <h1>Уважаемый Инвестор ${e.allData.User.first_name}!</h1>\n                            <p>\n                                Вы находитесь на сайте инвестиционного проекта партнера ${n.project.data.name}\n                                <br>\n                                Для того, чтобы проинвестировать в проект, Вам необходимо указатьсвои данные\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="version2_creating_block mt25">\n                    <div class="version2_creating_block_info version2_default_shadow_block">\n                        <div class="version2_default_bkg row_default"></div>\n                        <div class="version2_creating_block_info_row">\n                            <p class="pt25">\n                                <a href="https://google.com">"Пользовательское соглашение на обработку перснальных данных"</a>\n                                <br>\n                                <a href="https://google.com">"Договор оферты"</a>и<a href="https://google.com">"Политика конфиденциальности"</a>\n                            </p>\n                        </div>\n                        <div class="version2_creating_block_info_row_cheackbox">\n                            <label class="checkbox-custom-label" for="highload0">\n                                <input class="checkbox-custom" type="checkbox" name="highload0" id="highload0" checked/>\n                                <span class="checkmark"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="version2_invester_data_typeButtons">\n                    <div class="version2_invester_data_typeButtons_type">\n                        <!-- <div class="version2_invester_data_typeButtons_type_button" data="UR">\n                            <span>Юридическое лицо</span>\n                        </div> -->\n                        <div class="version2_invester_data_typeButtons_type_button" data="FIZ">\n                            <span>Продолжить как Физическое лицо</span>\n                        </div>\n                        <!-- <div class="version2_invester_data_typeButtons_type_button version2_invester_data_typeButtons_type_button_last" data="IP">\n                            <span>ИП</span>\n                        </div> -->\n                    </div>\n                    <div class="version2_invester_data_typeButtons_document">\n                        <div class="version2_default_bkg row_default"></div>\n                        <span><i class="far fa-file-alt"></i>Ознакомиться с договором проекта</span>\n                    </div>\n                </div>\n            `);$(".creating_page").css({"padding-bottom":"200px"}),t.find(".version2_invester_data_typeButtons_document").click(function(){if(window.screen.width<1300){var e=$('\n                        <div class="version2_invester_data_mobile_documents">\n                            <div class="version2_invester_data_mobile_documents_row">\n                                <div class="version2_invester_data_mobile_documents_img">\n                                    <img src="/documents/service/index-1.jpg" alt="">\n                                </div>\n                                <div class="version2_invester_data_mobile_documents_img">\n                                    <img src="/documents/service/index-2.jpg" alt="">\n                                </div>\n                                <div class="version2_invester_data_mobile_documents_img">\n                                    <img src="/documents/service/index-3.jpg" alt="">\n                                </div>\n                            </div>\n                        </div>\n                    ');e.css({position:"fixed",top:"0",left:"0","z-index":"1000","overflow-y":"scroll",height:"100vh"}),e.click(function(){$(this).fadeOut("fast",function(){$(this).remove()})}),$("body").append(e)}else window.open("/documents/service/index.pdf","_blank")}),t.find(".version2_invester_data_typeButtons_type_button").click(async function(){$(".version2_creating_block_info_row_cheackbox input").is(":checked")&&(n.typeRender=$(this).attr("data"),n.renderOldBlock())}),$(".creating_page").append(t)}async render(e,n){$(".index_page_body_data").append('<div class="creating_page" style="width: auto;"></div>');var a=this;if(_GET("InvRedacting")&&(a.redactingInvDoc=await t({methodName:"version2_getInvDocByRedactingId",data:_GET("InvRedacting")})),void 0===n){var i=await t({methodName:"getProjectForInvesterPage",data:_GET("user")}),c=await t({methodName:"getProjectForInvesterPageAllInvs",data:i._id});a.allInvsOfProject=c,a.project=i}await this.defaultCSS(),await this.renderFirstData()}async cheackGetDocuments(){var e=this;if($(".creating_page").empty(),$(".version2_invester_data_backBlock_circule").click(function(n){n.preventDefault(),e.render_next()}),window.screen.width<1300){var t=$(`\n                    <div class="version2_invester_data_mobile_documents">\n                        <div class="version2_invester_data_mobile_documents_row">\n                            <div class="version2_invester_data_mobile_documents_img">\n                                <img src="/html/assets/images/2.0.0/documents/image-001.png" alt="">\n                            </div>\n                            <div class="version2_invester_data_mobile_documents_img">\n                                <img src="/html/assets/images/2.0.0/documents/image-002.png" alt="">\n                            </div>\n                            <div class="version2_invester_data_mobile_documents_img">\n                                <img src="/html/assets/images/2.0.0/documents/image-003.png" alt="">\n                            </div>\n                            <div class="version2_invester_data_mobile_documents_document">\n                                <h1>Приложение номер 2 - Тестирование</h1>\n\n                                <p>Фио инвестора <data type="fio">${n(e.inv.data,"fio")}</data></p>\n                                <p>Дата <data type="date">${new Date}</data></p>\n                                <p>Сумма инвестиции <data type="summ">${e.money}</data></p>\n                                <p>Банк <data type="bank">${e.project.data.bank}</data></p>\n                                <p>Инн <data type="inn"></data>${n(e.inv.data,"inn")}</p>\n                                <p>Огрн <data type="ogrn">${n(e.inv.data,"ogrnip")}</data></p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="version2_creating_block_info_row_cheackbox">\n                        <label class="checkbox-custom-label" for="highload0">\n                            <input class="checkbox-custom" type="checkbox" name="highload0" id="highload0" checked/>\n                            <span class="checkmark"></span>\n                        </label>\n                    </div>\n                    <div class="creating_page_input" style="width: 360px;">\n                        <div class="creating_page_input_div" data="pay">\n                            <span style="text-align: center">Оплатить</span> \n                        </div>\n                    </div>\n                `);t.find(".creating_page_input_div").click(function(){e.cheackGet()}),void 0!==e.project.notFullpay&&0==Number(e.project.notFullpay)&&t.find(".creating_page_input_div").find("span").html("Подтвердить инвестицию"),$(".creating_page").append(t)}else{t=$('\n                    <div class="creating_page_input creating_page_input_document_img">\n                        <img src="./html/assets/images/documentPNG.png" alt="">\n                        <div class="creating_page_input_document_img_hover">\n                            <div class="creating_page_input_document_img_hover_row">\n                                <span>Ознакомится с договором</span>\n                                <span>Ознакомится с приложением №2</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="version2_creating_block_info_row_cheackbox creating_page_input_document_img_version2_creating_block_info_row_cheackbox">\n                        <label class="checkbox-custom-label" for="highload0">\n                            <input class="checkbox-custom" type="checkbox" name="highload0" id="highload0" checked/>\n                            <span class="checkmark"></span>\n                        </label>\n                        <a>Принимаю условия договора</a>\n                    </div>\n                    <div class="creating_page_input" style="width: 360px;">\n                        <div class="creating_page_input_div" data="pay">\n                            <span style="text-align: center">Оплатить</span> \n                        </div>\n                    </div>\n                ');t.find(".creating_page_input_div").css({background:"linear-gradient(81.65deg, #CF2DBF 18.55%, #951CDF 97.44%)"}),t.eq(0).find("span").eq(0).click(function(){window.screen.width<1300?DownLoadFileAjax(`/projects/${e.project._id}/${e.project.signature_document.user_document}`,`${e.project.signature_document.user_document}`):window.open(`/projects/${e.project._id}/${e.project.signature_document.user_document}`,"_blank")});var a="/html/project/application_number_2/?";a+=`fio=${n(e.inv.data,"fio")}&`,a+="number=2&",a+=`summ=${e.money}&`,"UR"==e.inv.type?(a+=`inn=${n(e.inv.data,"inn")}&`,a+=`ogrn=${n(e.inv.data,"ogrnip")}&`,a+=`do=${n(e.inv.data,"cpecial")}&`,a+=`fio_dolg=${n(e.inv.data,"fio_dolg")}&`):"IP"==e.inv.type&&(a+=`inn=${n(e.inv.data,"inn")}&`,a+=`ogrn=${n(e.inv.data,"ogrnip")}&`),a+=`type=${e.inv.type}&`,a+=`bank=${e.project.data.bank}`,e.urlForDocument=a,t.eq(0).find("span").eq(1).click(function(){window.screen.width<1300?DownLoadFileAjax(a,"document.html"):window.open(a,"_blank")}),t.find(".creating_page_input_div").click(function(){e.cheackGet()}),void 0!==e.project.notFullpay&&0==Number(e.project.notFullpay)&&t.find(".creating_page_input_div").find("span").html("Подтвердить инвестицию"),$(".creating_page").append(t)}}async cheackGet(){$(".creating_page").empty(),$(".version2_invester_data_backBlock_circule").click(function(n){n.preventDefault(),e.cheackGetDocuments()});var e=this,a=e.money+" ₽";void 0!==this.project.notFullpay&&(a=`${Number(Number(e.money.toString().trim().replace(/\s/g,""))/100*Number(this.project.notFullpay)).toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")} ₽ (${this.project.notFullpay}%)`);var i=$(`\n                <div class="creating_page_block">\n                    <div class="creating_page_start" style="margin-bottom: 20px">\n                        <div class="version2_default_bkg row_default"></div>\n                        <span style="position: relative; z-index: 2;">\n                            Уважаемый Инвестор ${n(e.inv.data,"fio")} переведите ${a} По реквезитам ниже и Пришлите чек оплаты для окончания инвестирования. <br><br>\n\n                            Реквезиты перечисления: <br><br>\n                            Банк-получатель: ${this.project.data.bank} <br>\n                            Корр. счет: ${this.project.data.account_correct} <br>\n                            БИК: ${this.project.data.bik} <br>\n                            КПП: ${this.project.data.kpp} <br>\n                            Получатель: ${this.project.data.recipient} <br>\n                            Счет получателя: ${this.project.data.account_get} <br>\n                            Назначение платежа: Номер Проекта ${this.project._id}, Имя проекта ${this.project.data.name} <br>\n                        </span>\n                    </div>\n                </div>\n            `),c=$('\n                <div class="creating_page_input">\n                    <div class="creating_page_input_div" data="pay">\n                        <input type="file" id="triggerClick">\n                        <span data="first" style="text-align: center; cursor: pointer;">Загрузить</span>\n                    </div>\n                </div>\n            ');c.find(".creating_page_input_div").css({background:"linear-gradient(81.65deg, #CF2DBF 18.55%, #951CDF 97.44%)"}),void 0!==e.project.notFullpay&&0==Number(e.project.notFullpay)&&(i.find(".creating_page_start span").html(` \n                        <div class="version_2_row_creating_page_input" style="position: relative; z-index: 2;">\n                            Уважаемый Инвестор ${n(e.inv.data,"fio")}\n                            Подтверждая инвестицию, вы подтверждаете, что по окончанию сбора средств в проект вы выплатитите зарезервированную вами сумму. Отказавшись вы получите запрет на использование сервиса в будущем на определенный срок\n                        </div>\n                    `.toString().trim()),c.find("span").html("Подтвердить")),c.find("span").click(async function(){if(void 0!==e.project.notFullpay&&0==Number(e.project.notFullpay))$(".preloader").fadeIn(),_GET("InvRedacting")?await t({methodName:"version2_investerData_invdoc_notMoney_redacting",data:{user:_GET("user"),inv:e.inv,money:e.money,url:e.urlForDocument,invId:_GET("InvRedacting")}}):await t({methodName:"version2_investerData_invdoc_notMoney",data:{user:_GET("user"),inv:e.inv,money:e.money,url:e.urlForDocument}}),window.open("tg://resolve?domain=investir_official_bot","_self").close();else if(e.date)$("#triggerClick").trigger("click");else{var n=$('\n                            <div class="autch_block">\n                                <div class="autch_block_row">\n                                    <p>Дата вашей инвестиции совпадает с текущей датой?</p>\n                                    <div class="autch_block_buttons">\n                                        <div class="autch_block_buttons_block autch_block_buttons_block_close">\n                                            <span>Не совпадает</span>\n                                        </div>\n                                        <div class="autch_block_buttons_block autch_block_buttons_block_accept">\n                                            <span>Совпадает</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        ');n.find(".autch_block_buttons_block_close").click(function(){function n(e,n,t){return new Array(n-e.toString().length+1).join(t)+e}$(".autch_block").find(".autch_block_row").remove();var t=new Date(Number(e.project.data_creating.toString())),a=new Date,i=$(`\n                                <div class="autch_block_row">\n                                    <p>Выберите дату инвестирования:</p>\n                                    <div class="autch_block_row_input_date">\n                                        <input type="date" placeholder="Дата" id='needDateNow' max="${a.getFullYear()}-${n(a.getMonth()+1,2,"0")}-${n(a.getDate(),2,"0")}" min="${t.getFullYear()}-${n(t.getMonth()+1,2,"0")}-${n(t.getDate(),2,"0")}">\n                                    </div>\n                                    <div class="autch_block_buttons">\n                                        <div class="autch_block_buttons_block autch_block_buttons_block_close">\n                                            <span>Назад</span> \n                                        </div>\n                                        <div class="autch_block_buttons_block autch_block_buttons_block_accept">\n                                            <span>Подтвердить</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            `);i.find(".autch_block_buttons").css("margin-top","25px"),i.find(".autch_block_buttons_block_close").click(function(){$(".autch_block").remove()}),i.find(".autch_block_buttons_block_accept").click(function(){var n=$("#needDateNow").val();n.length>0?(e.date=new Date(n).getTime(),$(".autch_block").remove(),$("#triggerClick").trigger("click")):alert("Выберите дату!")}),$(".autch_block").append(i)}),n.find(".autch_block_buttons_block_accept").click(async function(){$(".autch_block").remove(),$("#triggerClick").trigger("click")}),$("body").append(n)}});e=this;c.find("input[type=file]").change(async function(){var n=$(this);if($(this.files).length>0){await t({methodName:"setInvesterDataProjectForInvesterPage",data:{user:_GET("user"),data:{inv:e.inv,date:e.date}}});var a=$(this.files)[0].name,i=a.split("."),c=i[i.length-1].toUpperCase(),s=new FormData,d=`${getURL()}/file_cheack_get.io/files`;s.append("files",$(this.files)[0]),s.append("_User",_GET("user")),s.append("_id",e.project._id),s.append("_pts",c),s.append("_pay",e.money),s.append("_date",e.date),$(this).attr("token")&&s.append("token",$(this).attr("token"));var o=s,r=$('\n                        <div class="process_upload_block">\n                            <div class="process_upload_block_row">\n                                <div class="process_upload_block_line"></div>\n                            </div>\n                        </div>\n                    ');$(".index_page_body_header").append(r),axios.post(d,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){const n=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");if(null!==n){var t=Math.round(100*e.loaded/n);$(".process_upload_block_line").css("width",t+"%")}}}).then(a=>{if("ok"==a.data.status){n.attr("token",a.data.inv),alert("Чек прикоеплен!"),$(".process_upload_block").remove(),$('.creating_page_input span[data="first"]').html("Заменить"),$('.creating_page_input_div[data="show"]').remove(),$('.creating_page_input_div[data="accept"]').remove();var i=$('\n                                <div class="creating_page_input_div_row">\n                                    <div class="creating_page_input_div" data="show">\n                                        <span style="text-align: center">Посмотреть</span>\n                                    </div>\n                                    <div class="creating_page_input_div" data="accept">\n                                        <span style="text-align: center">Подтвердить</span>\n                                    </div>\n                                </div>\n                            ');i.find('[data="show"]').click(function(){window.open(`https://investir.one/projects/${e.project._id}/${a.data.inv}_investment.${c}`,"_blank")}),i.find('[data="accept"]').click(async function(){await t({methodName:"endInvestingDataPush",data:{user:_GET("user"),project:e.project._id,money:e.money.toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),date:e.date,url:e.urlForDocument,invId:a.data.inv}});var n="tg://resolve?domain=investir_official_bot";window.location=n}),$(".creating_page_input").append(i)}})}}),$(".creating_page").append(i),$(".creating_page").append(c)}async renderOldBlock(){var n=this;this.render_backBlock(),$(".version2_invester_data_backBlock_circule").click(function(e){$(".index_page_body_data").empty(),e.preventDefault(),n.render(null,!0)});try{var t=n.project.data.minimal_amount.toString().trim().replace(/\s/g,""),a=0,i=Number(n.project.data.attraction_amount.toString().replace(/\s/g,""));for(var c of(void 0!==n.project.requestInvestingMoney&&(i+=Number(n.project.requestInvestingMoney.toString().replace(/\s/g,""))),n.allInvsOfProject))a+=Number(c.data.pay.toString().replace(/\s/g,""));$(".creating_page").empty();var s=n.project.multiplicity,d="";void 0!==n.project.multiplicity&&(d=`<br>Сумма должна быть кратна: ${s.toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")} руб.`);var o=$(`\n                    <div class="creating_page_block">\n                        <div class="creating_page_start" style="margin-bottom: 20px">\n                            <div class="version2_default_bkg row_default"></div>\n                            <span style="position: relative; z-index: 2;">\n                                Уважаемый Инвестор ${e.allData.User.first_name} введите сумму инвестирования</a>.<br>\n                                Минимальная сумма входа: ${t.toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")} руб.\n                                ${d} <br>\n                                <span class="version2_invester_data_moneyFull">Сумма не должна превышать ${Number(i-a).toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")} руб.</span>\n                            </span>\n                        </div>\n                    </div>\n                `),r=$('\n                    <div class="creating_page_input">\n                        <div class="version2_default_bkg row_default"></div>\n                        <input type="text" class="creating_page_input_div" data="pay" placeholder="Сумма">\n                        <div class="creating_page_input_button">\n                            <span>Отправить</span>\n                        </div>\n                    </div>\n                ');_GET("InvRedacting")&&r.find('input[type="text"]').val(n.redactingInvDoc.data.pay),n.money&&r.find('input[type="text"]').val(n.money),_getCookie("pay_invester_data")&&r.find('input[type="text"]').val(Number(_getCookie("pay_invester_data")).toString().ReplaceNumber()),r.find("input").on("keyup input",function(){var e=$(this).val();e=e.replace(/[^\d;]/g,""),e=e.replace(/\s/g,"");var n=String(e).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ");$(this).val(n),setCookie("pay_invester_data",Number(n.replace(/\s/g,"")))});n=this;var p=!1;void 0!==n.project.notFullpay&&0==Number(n.project.notFullpay)&&(o.find(".version2_invester_data_moneyFull").remove(),p=!0,o.find(".creating_page_start span").append("Ваше место в очереди подтверждения заявок: "+Number(Number(n.allInvsOfProject.length)+Number(1))+"<br>"),o.find(".creating_page_start span").append("Вы находитесь в очереди проверки заявок инвестирования в проект, после которой мы отправим оповещение для оплаты в течении 3 дней")),r.find(".creating_page_input_button span").click(function(){var e=$(".creating_page_input input").val(),c=e.toString().replace(/\s/g,"");!p&&void 0!==n.project.requestInvestingMoney&&Number(i)<Number(a)+Number(c)?alert(`Сумма превышает на ${Number(Number(a)+Number(c)-Number(i)).toString().replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")}`):Number(c)<Number(t)?alert("Сумма недостаточна!"):void 0!==n.project.multiplicity?Number(c)%n.project.multiplicity==0?(n.money=e,n.render_next()):alert(`Сумма должна быть кратной ${n.project.multiplicity}`):(n.money=e,n.render_next())}),$(".creating_page").append(o),$(".creating_page").append(r)}catch(e){alert(e)}}async render_backBlock(){var e=$('\n                <div class="version2_invester_data_backBlock">\n                    <div class="version2_invester_data_backBlock_circule version2_default_bkg row_default">\n                        <i class="fal fa-angle-left"></i>\n                    </div>\n                </div>\n            ');$(".version2_invester_data_backBlock").remove(),$(".index_page_body_data").prepend(e)}async render_next(e,t){this.DT=this.typeRender,this.render_backBlock(),$(".version2_invester_data_backBlock_circule").off("click").click(function(e){e.preventDefault(),i.renderOldBlock()});var a={UR:function(){var e=$('\n                        <div class="creating_page_input">\n                            <div class="version2_default_bkg row_default"></div>\n                            <div class="version_2_creating_page_input_row">\n                                <input type="text" class="creating_page_input_div" data="fio" placeholder="Название Юр. Лица">\n                                <input type="text" class="creating_page_input_div" data="inn" placeholder="ИНН">\n                                <input type="text" class="creating_page_input_div" data="kpp" placeholder="КПП">\n                                <input type="text" class="creating_page_input_div" data="ogrnip" placeholder="ОГРН">\n                                <input type="text" class="creating_page_input_div" data="cpecial" placeholder="Должность">\n                                <input type="text" class="creating_page_input_div" data="fio_dolg" placeholder="ФИО должностного лица">\n                                <input type="text" class="creating_page_input_div" data="addr" placeholder="Юридический адрес">\n                                <input type="text" class="creating_page_input_div" data="bank" placeholder="Банк получателя">\n                                <input type="text" class="creating_page_input_div" data="bik" placeholder="БИК">\n                                <input type="text" class="creating_page_input_div" data="nomer" placeholder="Номер расчетного счета">\n                                <input type="text" class="creating_page_input_div" data="nomer_kor" placeholder="Номер корреспондентского счета">\n                                <input type="text" class="creating_page_input_div" data="info_more" placeholder="На основе чего вы действуете?">\n                                <div class="creating_page_input_button">\n                                    <span>Отправить</span> \n                                </div>\n                            </div>\n                        </div>\n                    ')
;e.find('input[data="inn"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="ogrnip"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="nomer"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="bik"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="nomer_kor"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),$(".creating_page").append(e)},IP:function(){var e=$('\n                        <div class="creating_page_input">\n                            <div class="version2_default_bkg row_default"></div>\n                            <div class="version_2_creating_page_input_row">\n                                <input type="text" class="creating_page_input_div" data="fio" placeholder="ФИО">\n                                <input type="text" class="creating_page_input_div" data="inn" placeholder="ИНН">\n                                <input type="text" class="creating_page_input_div" data="ogrnip" placeholder="ОГРНИП">\n                                <input type="text" class="creating_page_input_div" data="addr" placeholder="адрес">\n                                <input type="text" class="creating_page_input_div" data="bank" placeholder="Банк получателя">\n                                <input type="text" class="creating_page_input_div" data="bik" placeholder="БИК">\n                                <input type="text" class="creating_page_input_div" data="nomer" placeholder="Номер расчетного счета">\n                                <input type="text" class="creating_page_input_div" data="nomer_kor" placeholder="Номер корреспондентского счета">\n                                <input type="text" class="creating_page_input_div" data="info_more" placeholder="На основе чего вы действуете?">\n\n                                <div class="creating_page_input_button">\n                                    <span>Отправить</span>\n                                </div>\n                            </div>\n                        </div>\n                    ');e.find('input[data="inn"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="ogrnip"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="nomer"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="bik"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="nomer_kor"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),$(".creating_page").append(e)},FIZ:function(){var e=$('\n                        <div class="creating_page_input">\n                            <div class="version2_default_bkg row_default"></div>\n                            <div class="version_2_creating_page_input_row">\n                                <input type="text" class="creating_page_input_div" data="fio" placeholder="* ФИО полностью">\n                                <input type="text" class="creating_page_input_div" data="cpecial" placeholder="* Номер паспорта и серия">\n                                <input type="text" class="creating_page_input_div" data="how_get" placeholder="* Кем выдан">\n                                <input type="text" class="creating_page_input_div" data="propiska" placeholder="* Адрес регистрации (прописка)">\n                                <input type="text" class="creating_page_input_div" data="bank" placeholder="* Банк получателя">\n                                <input type="text" class="creating_page_input_div" data="bik" placeholder="* БИК">\n                                <input type="text" class="creating_page_input_div" data="nomer" placeholder="* Номер расчетного счета">\n                                <input type="text" class="creating_page_input_div" data="nomer_kor" placeholder="* Номер корреспондентского счета">\n                                <input type="text" class="creating_page_input_div" data="info_more" placeholder="* На основе чего вы действуете?">\n\n                                <div class="version2_creating_page_input_inputCheackBoxRezident">\n                                    <span>* Являетесь ли вы резидентом?</span>\n                                    <div class="version2_creating_page_input_inputCheackBoxRezident_buttons">\n                                        <div class="version2_creating_page_input_inputCheackBoxRezident_buttons_button">\n                                            <div class="version2_default_bkg row_default"></div>\n                                            <a>Да</a>\n                                        </div>\n                                        <div class="version2_creating_page_input_inputCheackBoxRezident_buttons_button">\n                                            <div class="version2_default_bkg row_default"></div>\n                                            <a>Нет</a>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <p style="\n                                    position: relative;\n                                    z-index: 2;\n                                ">* обязательные поля</p>\n    \n                                <div class="creating_page_input_button">\n                                    <span>Отправить</span>\n                                </div>\n                            </div>\n                        </div>\n                    ');e.find(".version2_creating_page_input_inputCheackBoxRezident_buttons_button").click(function(){$(".version2_creating_page_input_inputCheackBoxRezident_buttons_button").removeClass("selected"),$(this).addClass("selected")}),e.find('input[data="cpecial"]').mask("9999 999999"),e.find('input[data="nomer"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="bik"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),e.find('input[data="nomer_kor"]').bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),$(".creating_page").append(e)}};$(".creating_page").empty(),a[this.typeRender](),$("input.creating_page_input_div").keydown(function(e){if(13===e.keyCode){var n=$(this).index(),t=n+1;t>$("input.creating_page_input_div").length-1&&(t=0),$("input.creating_page_input_div").eq(t).focus()}});var i=this;$(".creating_page_input_button").click(function(){var n={type:e,data:[]},t=!1,a=!0;$(".creating_page_input").find("input").each((e,a)=>{0==$(a).val().length&&(t=!0),n.data.push({_id:$(a).attr("data"),data:$(a).val()})}),$(".version2_creating_page_input_inputCheackBoxRezident_buttons_button").each((e,n)=>{$(n).hasClass("selected")&&(a=!1)}),a?alert("Ответьте на вопрос являетесь ли вы резидентом"):t?(alert("Введите все данные!"),i.inv=n):(i.inv=n,i.cheackGetDocuments())}),_GET("InvRedacting")&&$(".creating_page_input_div").each(function(e,t){void 0!==$(t).attr("data")&&void 0!==n(i.redactingInvDoc.data.data,$(t).attr("data"))&&$(t).val(n(i.redactingInvDoc.data.data,$(t).attr("data")))}),i.inv&&$(".creating_page_input_div").each(function(e,t){void 0!==$(t).attr("data")&&void 0!==n(i.inv.data,$(t).attr("data"))&&$(t).val(n(i.inv.data,$(t).attr("data")))}),window.screen.width<1300&&$(".creating_page").css({"padding-bottom":"100px"})}}var i={invester_data:a};if(e.Components)for(var c in i)e.Components[c]=i[c];else e.Components=i})(window);