(function(e){"use strict";const n=({methodName:n,data:t})=>new Promise((a,i)=>{e.PostComponents(n,t,e=>{a(e)})});class t{constructor(){this.global=$('\n                <div class="version2_creating"></div>\n            ')}validateInn(e){var n={},t=!1;if("number"==typeof e?e=e.toString():"string"!=typeof e&&(e=""),e.length)if(/[^0-9]/.test(e))n.code=2,n.message="ИНН может состоять только из цифр";else if(-1===[10,12].indexOf(e.length))n.code=3,n.message="ИНН может состоять только из 10 или 12 цифр";else{var a=function(e,n){var t=0;for(var a in n)t+=n[a]*e[a];return parseInt(t%11%10)};switch(e.length){case 10:var i=a(e,[2,4,10,3,5,9,4,6,8]);i===parseInt(e[9])&&(t=!0);break;case 12:var s=a(e,[7,2,4,10,3,5,9,4,6,8]),r=a(e,[3,7,2,4,10,3,5,9,4,6,8]);s===parseInt(e[10])&&r===parseInt(e[11])&&(t=!0)}t||(n.code=4,n.message="Неправильное контрольное число")}else n.code=1,n.message="ИНН пуст";return{result:t,error:n}}async startRenderCreating(t,a){var i=0,s={LEGAL:function(){i=1},INDIVIDUAL:function(){i=2},FIZ:function(){i=3}};"error"==t?s.FIZ():s[t.type]();var r={user:e.allData._id,type:i,data:t,inn:a},o=await n({methodName:"setCreatingData",data:r});location.href=o}defaultCSS(){$(".index_page_menu").css({flex:"none",position:"absolute","margin-left":"-100%"}),$(".index_page_body_header_info").css({"justify-content":"center"}),$(".index_page_body_header_info span").html("ЗАЯВКА НА ФИНАНСИРОВАНИЕ ПРОЕКТА")}async nextRender(){var e=$(".version2_creating_block_input input").val(),t=this.validateInn(e);if(t.result){$(".version2_creating_block_input input").val("");var a=await n({methodName:"creatingData",data:e});this.startRenderCreating(a,e)}}async startDefault(){var n=$(`\n                <div class="version2_creating_block">\n                    <div class="version2_creating_block_info version2_default_shadow_block">\n                        <div class="version2_default_bkg row_default"></div>\n                        <div class="version2_creating_block_info_row">\n                            <h1>Уважаемый пользователь ${e.allData.User.first_name}!</h1>\n                            <p>Вводя данные, вы подтверждаете что ознакомились с условиями “Пользовательского соглашения” и “Политики обработки данных”</p>\n                        </div>\n                    </div>\n                    <div class="version2_creating_block_onlyText version2_default_boxShadow_text">\n                        <h1>Введите ИНН для создания заявки на финансирование проекта</h1>\n                    </div>\n                    <div class="version2_creating_block_input">\n                        <div class="version2_default_bkg row_default"></div>\n                        <div class="version2_creating_block_input_row">\n                            <input type="text" placeholder="Введите Ваш ИНН">\n                            <button type="button">Отправить</button>\n                        </div>\n                    </div>\n                </div>\n            `);n.find("input").bind("change keyup input click",function(){this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,""))}),this.global.append(n);var t=this;n.find("button").click(function(){t.nextRender()})}async render(){this.defaultCSS(),this.startDefault(),$(".index_page_body_data").append(this.global)}}var a={creating_page:t};if(e.Components)for(var i in a)e.Components[i]=a[i];else e.Components=a})(window);